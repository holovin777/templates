{% extends "oscar/base.html" %}
{% load staticfiles %}
{% load i18n %}

{% block layout %}
    {# Site logo/title, mini-basket, browse dropdown and searchbox #}
    <div class="">
        <nav class="navbar navbar-expand-lg navbar-dark">
            {% include "oscar/partials/brand.html" with active='/home' %}
        </nav>
    </div>
    <br>
    {% if images %}
      <div id="carouselHomeImageControls" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
	  {%  if images|length > 1 %}
	    {% for image in images %}
	      <div class="carousel-item{% if image.active %} active{% endif %}">
		      <img src="{% if image.image_url %}{{ image.image_url }}{% else %}{{ image.image_file.url }}{% endif %}" class="d-block" style="max-height: 64px; margin: 0 auto" alt="...">
              </div>
	    {% endfor %}
              <a class="carousel-control-prev" href="#carouselHomeImageControls" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
              </a>
              <a class="carousel-control-next" href="#carouselHomeImageControls" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
              </a>
	  {% else %}
            {% for image in images %}
	      <div class="carousel-item{% if image.active %} active{% endif %}">
		<img src="{% if image.image_url %}{{ image.image_url }}{% else %}{{ image.image_file.url }}{% endif %}" class="d-block" style="max-height: 64px; margin: 0 auto" alt="...">
              </div>
            {% endfor %}
          {% endif %}
        </div>
      </div>
    {% endif %}
    <br>
    <div class="text-center">
      <a href="/" type="button" class="btn btn-outline-primary">{% trans "Browse store" %} </a>
    </div>
    <br>
    {% if posts %}
      {% for post in posts %}
        <a class="container btn btn-block" href="{% url 'post_detail' pk=post.pk %}">
	  <div class="card mb-3 bg-transparent border-secondary text-white" style="">
	    <div class="row no-gutters">
	      <div class="col-md-9">
                <div class="card-body">
                  <h5 class="card-title">{{ post.title }}</h5>
	          {% if post.description %}<p class="card-text">{{ post.description }}</p>{% endif %}
		  <div class="card-footer text-muted border-dark">
                  <p class="card-text"><small class="text-muted">{{ post.published_date }}</small></p>
		  </div>
		</div>
              </div>
              <div class="col-md-3">
                {% if post.image_url or post.image_file.url %}
                  <img src="{% if post.image_url %}{{ post.image_url }}{% else %}{{ post.image_file.url }}{% endif %}" class="card-img" alt="image">
                {% else %}
		{% endif %}
	      </div>
	    </div>
	  </div>
	</a>
        <br>
      {% endfor %}
    {% endif %}
    {# Main content of page - other layout templates may override this block #}
    {% include "oscar/partials/footer.html" %}
{% endblock %}

{% block onbodyload %}
    {{ block.super }}
    oscar.init();
{% endblock %}
